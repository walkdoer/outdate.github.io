<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>代码整洁之道(读书笔记) | 边走边想，边想边做</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1. 整洁代码什么样的代码算是整洁？
只做好一件事情
没有重复代码
代码逻辑直接了当，只包含必须的代码
尽可能少的依赖关系，便于维护
明确的定义，提供清晰的尽可能少的API
小块的代码块
好的表达力（体现在变量名，方法和类的抽象等）
完善错误处理代码（容易被忽略的细节）
一致性（架构设计，变量名，编码规范等）


让营地比你来的时候更加干净

这一条童子军军规，恰如其分的表达了我的愿望，让项目的代">
<meta property="og:type" content="article">
<meta property="og:title" content="代码整洁之道(读书笔记)">
<meta property="og:url" content="http://zhangmhao.github.io/2014/06/26/代码整洁之道(读书笔记)/index.html">
<meta property="og:site_name" content="边走边想，边想边做">
<meta property="og:description" content="1. 整洁代码什么样的代码算是整洁？
只做好一件事情
没有重复代码
代码逻辑直接了当，只包含必须的代码
尽可能少的依赖关系，便于维护
明确的定义，提供清晰的尽可能少的API
小块的代码块
好的表达力（体现在变量名，方法和类的抽象等）
完善错误处理代码（容易被忽略的细节）
一致性（架构设计，变量名，编码规范等）


让营地比你来的时候更加干净

这一条童子军军规，恰如其分的表达了我的愿望，让项目的代">
<meta property="og:updated_time" content="2015-09-22T13:58:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="代码整洁之道(读书笔记)">
<meta name="twitter:description" content="1. 整洁代码什么样的代码算是整洁？
只做好一件事情
没有重复代码
代码逻辑直接了当，只包含必须的代码
尽可能少的依赖关系，便于维护
明确的定义，提供清晰的尽可能少的API
小块的代码块
好的表达力（体现在变量名，方法和类的抽象等）
完善错误处理代码（容易被忽略的细节）
一致性（架构设计，变量名，编码规范等）


让营地比你来的时候更加干净

这一条童子军军规，恰如其分的表达了我的愿望，让项目的代">
  
    <link rel="alternative" href="/atom.xml" title="边走边想，边想边做" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://www.gravatar.com/avatar/fb8601449879167556af06aa6a895cd4?s=300" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Andrew Zhang</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/github.com/zhangmhao" title="github">github</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Com/" style="font-size: 10px;">Com</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/haskell/" style="font-size: 10px;">haskell</a> <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/http协议/" style="font-size: 10px;">http协议</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/nwjs/" style="font-size: 10px;">nwjs</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/restful/" style="font-size: 10px;">restful</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/交互设计/" style="font-size: 10px;">交互设计</a> <a href="/tags/前端开发/" style="font-size: 10px;">前端开发</a> <a href="/tags/前端性能优化/" style="font-size: 17.5px;">前端性能优化</a> <a href="/tags/回调/" style="font-size: 10px;">回调</a> <a href="/tags/复杂系统/" style="font-size: 10px;">复杂系统</a> <a href="/tags/工具开发/" style="font-size: 10px;">工具开发</a> <a href="/tags/心理学/" style="font-size: 10px;">心理学</a> <a href="/tags/性能优化/" style="font-size: 12.5px;">性能优化</a> <a href="/tags/总结/" style="font-size: 12.5px;">总结</a> <a href="/tags/时间管理/" style="font-size: 12.5px;">时间管理</a> <a href="/tags/构建工具/" style="font-size: 10px;">构建工具</a> <a href="/tags/模块化/" style="font-size: 10px;">模块化</a> <a href="/tags/生活优化/" style="font-size: 10px;">生活优化</a> <a href="/tags/组件化/" style="font-size: 10px;">组件化</a> <a href="/tags/编程语言/" style="font-size: 15px;">编程语言</a> <a href="/tags/设计/" style="font-size: 10px;">设计</a> <a href="/tags/设计文档/" style="font-size: 12.5px;">设计文档</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">探索这个太有趣的世界</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Andrew Zhang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://www.gravatar.com/avatar/fb8601449879167556af06aa6a895cd4?s=300" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Andrew Zhang</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/github.com/zhangmhao" title="github">github</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-代码整洁之道(读书笔记)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/06/26/代码整洁之道(读书笔记)/" class="article-date">
  	<time datetime="2014-06-25T16:00:00.000Z" itemprop="datePublished">2014-06-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      代码整洁之道(读书笔记)
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/读书笔记/">读书笔记</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-_整洁代码">1. 整洁代码</h2><h4 id="什么样的代码算是整洁？">什么样的代码算是整洁？</h4><ul>
<li>只做好一件事情</li>
<li>没有重复代码</li>
<li>代码逻辑直接了当，只包含必须的代码</li>
<li>尽可能少的依赖关系，便于维护</li>
<li>明确的定义，提供清晰的尽可能少的API</li>
<li>小块的代码块</li>
<li>好的表达力（体现在变量名，方法和类的抽象等）</li>
<li>完善错误处理代码（容易被忽略的细节）</li>
<li>一致性（架构设计，变量名，编码规范等）</li>
</ul>
<blockquote>
<p>让营地比你来的时候更加干净</p>
</blockquote>
<p>这一条童子军军规，恰如其分的表达了我的愿望，让项目的代码质量随之时间的推移变得越来越好</p>
<h2 id="2-_有意义的命名">2. 有意义的命名</h2><h4 id="避免误导">避免误导</h4><p>例如: 不要用accountList来指定一组账号，除非它真的是List类型，可以使用accounts或者accountGroup</p>
<h4 id="有意义的区分">有意义的区分</h4><p>例如: </p>
<ol>
<li>使用Product ProductInfo ProductData来表示3个不同类的话是很难区分的，因为Info和Data意义上并没有太大的区别，容易混淆，类似的还有moneyCount和money</li>
<li>nameString真的比name更加清晰吗？</li>
</ol>
<ul>
<li>类名和对象应该是名词，或者名词短语，不应该是动词</li>
<li>方法名应该是动词，或者动词短语</li>
</ul>
<h2 id="3-_函数">3. 函数</h2><ul>
<li>短小</li>
<li>只做一件事（函数中的代码处于同一个抽象层级）</li>
<li>无副作用 只做一件事可以保证无副作用，但是一个无副作用的函数不一定就只做一件事。所以这里不能将无副作用看成是上一点“只做一件事”的结果。副作用：时序性的耦合，顺序依赖。</li>
<li>给函数起一个好名字（包括一致的命名方式）<ul>
<li>动词+关键字（名词）<code>writeFile</code>要优于模糊不清的<code>write</code></li>
</ul>
</li>
<li><p>尽可能少的函数参数（当然,0个是最优的）</p>
<ul>
<li>合理的二元函数 例如笛卡尔点 new Point(10, 10) 这个是自然的秩序，二元是必然的</li>
<li><p>参数较多，就该考虑是否需要抽象为对象 <figure class="highlight"><figcaption><span>x, double y, double radius)``` 可以改写为 ```drawCircle(Point p, double radius)```.将多元函数成功降元。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- &#26631;&#24535;&#21442;&#25968;</span><br></pre></td></tr></table></figure></p>
<p>render(boolean isMobile);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以改写为两个函数:</span><br></pre></td></tr></table></figure>
<p>renderForMobile()  和 renderForPC()<br>``` </p>
</li>
</ul>
</li>
<li>输出参出  <code>appendFooter</code> 在不查看函数声明的时候, 直觉的会把参数当做输入参数，也就是<code>appendFooter(footer)</code> 但是如果函数声明为<code>void appendFooter(StringBuffer report)</code>,就会恍然大悟了原来是输出参数。优化的方法，可以改写为： <code>report.appendFooter(footer)</code> </li>
<li>错误处理<ul>
<li>抽离try/catch代码块</li>
<li>使用异常的优势<ul>
<li>将异常处理代码从主路径中分离出来(P42-3.9)</li>
</ul>
</li>
</ul>
</li>
<li>Don’t Repeat Yourself (DRY)</li>
</ul>
<blockquote>
<p>语言是程序员设计用来描述系统的。函数是语言的动词，类是语言的名词。大师级程序员把系统当做故事来讲，而不是当做程序来写。他们使用编程语言提供的工具来搭建一种更为丰富，更有表达力的语言，用来讲那个故事。<br>使用清晰精确的语言来讲述一个故事。</p>
</blockquote>
<h2 id="4-_注释">4. 注释</h2><h4 id="注释是一种失败">注释是一种失败</h4><p>无法用代码语言清晰直接表达自己的思路，而需要简洁用其他语言来表达自己的意图。这个时候最好考虑一下是否先改造代码，而不是添加注释。</p>
<h4 id="注释会撒谎">注释会撒谎</h4><p>程序员很难坚持维护注释，导致注释和代码随之时间的推移会慢慢脱节，所以尽可能用代码语言来解释，因为代码是唯一正确的信息源。</p>
<h4 id="值得写的注释">值得写的注释</h4><ul>
<li>法律信息</li>
<li>对意图的解释</li>
<li>警示</li>
<li>TODO</li>
<li>Public API DOC（私有函数是否需要API文档值得商榷）</li>
</ul>
<h4 id="应该删除的注释">应该删除的注释</h4><p>要写就必须写好注释，不要喃喃自语的废话</p>
<ul>
<li>多余的注释</li>
<li>被注释掉的无用代码（这也属于注释的一部分）</li>
</ul>
<h4 id="需要改进的注释">需要改进的注释</h4><ul>
<li>解释的不够详细</li>
<li>可以用代码语言便可解释清楚的注释就不要用注释</li>
</ul>
<h2 id="5-_单元测试">5. 单元测试</h2><p>测试代码和生产代码一样重要，测试代码的可读性甚至要跟强。不好的测试相当于没有测试，因为迟早会因为难以维护而起不到单元测试的作用。</p>
<h4 id="单元测试的编写步骤">单元测试的编写步骤</h4><ol>
<li><strong>Build</strong> 构造测试数据</li>
<li><strong>Operate</strong> 操作测试数据</li>
<li><strong>Check</strong> 检查测试数据</li>
</ol>
<h2 id="6-_对象和数据结构">6. 对象和数据结构</h2><p>隐藏实现并非只是在变量之间放上一个函数层那么简单，隐藏实现关乎抽象。下意识的使用Getter和Setter将变量推向外部（public）,这样的行为是不可取的。每一个公有接口都应该是深思熟虑过的，一遍用户无需了解数据的实现细节就能够操作数据的本体<br>而且简单的使用Getter和Setter是违反The Law of Demeter. </p>
<h2 id="7-_类">7. 类</h2><h4 id="类应该短小">类应该短小</h4><p>可以用代码行数(LOC)来衡量函数的大小，用什么来衡量一个类的大小呢？ <strong>权责！</strong></p>
<ul>
<li><strong>单一权责</strong></li>
<li><p><strong>内聚</strong></p>
<p>  将类中的大函数分割成几个小函数，但是这样子，小函数之间就会通过函数参数进行通信，而将函数参数上升为类的属性变量，就不需要传参数了，但是这样子也意味着类丧失了内聚性，因为出现了越来越多避免传参数而出现的类变量。为了提高这些类的内聚，就会拆分这些类。所以将大函数拆解为小函数，往往也是将类拆分为多个小类的契机。</p>
</li>
<li>类的方法应该细粒度（甚至是原子操作）</li>
</ul>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/07/12/探索如何管理API/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          探索API管理的可行方案
        
      </div>
    </a>
  
  
    <a href="/2014/06/17/暗时间(读书笔记)/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">暗时间 (读书笔记)</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Andrew Zhang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>